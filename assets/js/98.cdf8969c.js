(window.webpackJsonp=window.webpackJsonp||[]).push([[98],{349:function(t,s,a){"use strict";a.r(s);var n=a(28),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"框架专题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#框架专题"}},[t._v("#")]),t._v(" 框架专题")]),t._v(" "),a("h2",{attrs:{id:"_1-vue-问题汇总"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-vue-问题汇总"}},[t._v("#")]),t._v(" 1. Vue 问题汇总")]),t._v(" "),a("h3",{attrs:{id:"_1-1-虚拟-dom"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-虚拟-dom"}},[t._v("#")]),t._v(" 1.1 虚拟 DOM")]),t._v(" "),a("ul",[a("li",[t._v("什么是 Virtual DOM\n"),a("ul",[a("li",[t._v("本质上，虚拟 DOM 是一个 JavaScript 对象，通过对象的方式来表示 DOM 结构，将页面的状态抽象为 JS 对象的形式，配合不同的渲染工具，使跨平台渲染成为可能。")]),t._v(" "),a("li",[t._v("通过事物处理机制，将多次 DOM 修改的结果一次性的更新到页面上，从而"),a("strong",[t._v("有效的减少页面渲染的次数，减少修改 DOM 的重绘重排次数，提高渲染性能")]),t._v("。")])])]),t._v(" "),a("li",[t._v("为什么使用 Virtual DOM\n"),a("ul",[a("li",[t._v("保证性能下限，在不进行手动优化的情况下，提供过得去的性能")]),t._v(" "),a("li",[t._v("跨平台\n"),a("ul",[a("li",[t._v("虚拟 DOM 本质上是 JS 对象，可以很方便的跨平台操作，比如服务器渲染、uniapp 等")])])])])]),t._v(" "),a("li",[t._v("Virtual DOM 的问题\n"),a("ul",[a("li",[t._v("首次渲染大量 DOM 时，由于多了一层虚拟 DOM 的计算，会比 innnerHTML 插入慢")])])])]),t._v(" "),a("h3",{attrs:{id:"_1-2-vue-dom-diff-算法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-vue-dom-diff-算法"}},[t._v("#")]),t._v(" 1.2 Vue Dom Diff 算法")]),t._v(" "),a("ol",[a("li",[t._v("算法复杂度\n"),a("ul",[a("li",[t._v("两棵树的完全 Dom diff 时间复杂度度在 O(n^3)，但是 Vue 它只进行同层级的 Dom diff，只有 O(n)")])])]),t._v(" "),a("li",[t._v("diff 算法的两个特点\n"),a("ul",[a("li",[t._v("只会同级比较，不跨层级")]),t._v(" "),a("li",[t._v("diff 比较循环两边往中间靠拢")])])]),t._v(" "),a("li",[a("RouterLink",{attrs:{to:"/front-end/javascript/source-code/vue.html#_5-patch-js"}},[t._v("比较过程")]),t._v(" "),a("ul",[a("li",[t._v("新旧 Vnode 进行开始位置和结束位置的标记"),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" oldStartIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" newStartIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" oldEndIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" oldStartVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" oldEndVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" oldCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("oldEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" newEndIdx "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" newStartVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" newEndVnode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" newCh"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("newEndIdx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),a("li",[t._v("循环处理节点\n"),a("ol",[a("li",[t._v("如果当前 oldStartVnode 和 newStartVnode 节点相同，会复用老节点，进行 patchVnode，更新 oldStartVnode、newStartVnode，odlStartIndex++、newStartIndex++")]),t._v(" "),a("li",[t._v("如果当前 oldEndVnode 和 newEndVnode 节点相同，直接复用老节点，进行 patchVnode，更新 oldEndVnode、newEndVnode，oldEndIndex--、newEndIndex--")]),t._v(" "),a("li",[t._v("如果当前 oldStartVnode 和 newEndVnode 节点相同，直接复用老节点，进行 patchVnode，将老节点移动到 odlEndVnode 之后，更新 oldStartVnode、newEndVnode，oldStartIndex++、newEndIndex--")]),t._v(" "),a("li",[t._v("如果当前 oldEndVnode 和 newStartVnode 节点相同，直接复用老节点，进行 patchVnode，将老节点移动到 oldStartVnode 之前，更新 oldEndVnode、newStartVnode，oldEndIndex--，newStartIndex++")]),t._v(" "),a("li",[t._v("如果都不满足相同则没有相同节点复用，进行 key 对比(老节点依据 key 生成一个字典)。满足的进行 patchVnode，就将对应的节点移动到 oldStartVnode 之前，更新 newStartVnode，newStartIndex++")]),t._v(" "),a("li",[t._v("循环结束，oldStartIdx > oldEndIdx 的话就清除剩下的老节点， newStartIdx > newEndIdx 的话就直接插入对应的位置")])])])])],1)]),t._v(" "),a("img",{staticClass:"zoom-img",attrs:{src:"/interview/vue-dom-diff.png"}}),t._v(" "),a("h3",{attrs:{id:"_1-3-双向数据绑定-v-model"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-双向数据绑定-v-model"}},[t._v("#")]),t._v(" 1.3 双向数据绑定/v-model")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineProperty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"_1-4-数组监听"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-数组监听"}},[t._v("#")]),t._v(" 1.4 数组监听")]),t._v(" "),a("p",[t._v("Vue 通过原型拦截的方式重写了数组的 7 个方法，首先获取到这个数组的 ob （它的 Observer 对象），如果有新值，就调用 observeArray 对新的值进行监听，然后手动调用 notify，通知 render watcher，执行 update")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// https://github.com/vuejs/vue/blob/dev/src/core/observer/array.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" arrayProto "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Array")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("prototype"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" arrayMethods "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Object"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arrayProto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" methodsToPatch "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"push"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"pop"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"shift"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"unshift"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"splice"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sort"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"reverse"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmethodsToPatch"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("forEach")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("method")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" original "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" arrayProto"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("def")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("arrayMethods"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" method"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mutator")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ..")]),t._v("\n        ob"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dep"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("notify")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" result"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h3",{attrs:{id:"_1-5-computed、methods-区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-5-computed、methods-区别"}},[t._v("#")]),t._v(" 1.5 computed、methods 区别")]),t._v(" "),a("ul",[a("li",[t._v("computed 是响应式的， methods 不是")]),t._v(" "),a("li",[t._v("computed 定义的成员像属性一样访问，methods 定义的成员必须以函数的方式访问")]),t._v(" "),a("li",[t._v("computed 带缓存的")]),t._v(" "),a("li",[t._v("computed 可以只定义一个函数作为只读属性，也可以定义 get/set 变成读写属性")]),t._v(" "),a("li",[t._v("computed 不支持异步")])]),t._v(" "),a("h3",{attrs:{id:"_1-6-nexttick-原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-nexttick-原理"}},[t._v("#")]),t._v(" 1.6 nextTick 原理")]),t._v(" "),a("p",[t._v("由于 Vue 的更新是异步执行的，并且缓存在同一事件循环中，等同一数据循环中的所有数据变化完成后，再统一进行视图更新")]),t._v(" "),a("p",[t._v("核心利用了 Promise、MutationObserver、setImmediate、setTimeout 模拟宏/微任务")]),t._v(" "),a("h3",{attrs:{id:"_1-7-keep-alive-原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-7-keep-alive-原理"}},[t._v("#")]),t._v(" 1.7 keep-alive 原理")]),t._v(" "),a("p",[t._v("本质就是 LRU 算法")]),t._v(" "),a("ol",[a("li",[t._v("获取 keep-alive 下第一个子组件的实例对象，然后获取这个组件的组件名")]),t._v(" "),a("li",[t._v("通过组件名去匹配 include、exclude，判断是否需要缓存，不需要缓存就直接返回当前组件的实例 vNode")]),t._v(" "),a("li",[t._v("需要缓存则更新缓存中对应组件的 LRU 位置，超出长度就删除最远距离的哪个组件")])]),t._v(" "),a("h3",{attrs:{id:"_1-8-依赖收集"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-8-依赖收集"}},[t._v("#")]),t._v(" 1.8 "),a("RouterLink",{attrs:{to:"/front-end/javascript/source-code/vue.html#依赖收集过程"}},[t._v("依赖收集")])],1),t._v(" "),a("h3",{attrs:{id:"_1-9-父子组件，非父子组件通信方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-9-父子组件，非父子组件通信方式"}},[t._v("#")]),t._v(" 1.9 父子组件，非父子组件通信方式")]),t._v(" "),a("h4",{attrs:{id:"_1-父组件向子组件传值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-父组件向子组件传值"}},[t._v("#")]),t._v(" 1. 父组件向子组件传值")]),t._v(" "),a("ul",[a("li",[t._v("Props 传值")]),t._v(" "),a("li",[t._v("$parent 获取父组件的方法或属性")])]),t._v(" "),a("h4",{attrs:{id:"_2-子组件向父组件传值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-子组件向父组件传值"}},[t._v("#")]),t._v(" 2. 子组件向父组件传值")]),t._v(" "),a("ul",[a("li",[t._v("通过 $emit 触发自定义事件")]),t._v(" "),a("li",[t._v("$children 获取子组件实例")]),t._v(" "),a("li",[t._v("使用 ref 获取子组件实例")])]),t._v(" "),a("h4",{attrs:{id:"_3-兄弟组件传值"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-兄弟组件传值"}},[t._v("#")]),t._v(" 3. 兄弟组件传值")]),t._v(" "),a("h4",{attrs:{id:"_4-跨组件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-跨组件"}},[t._v("#")]),t._v(" 4. 跨组件")]),t._v(" "),a("ul",[a("li",[t._v("$attrs、$listeners")]),t._v(" "),a("li",[t._v("project、inject")]),t._v(" "),a("li",[t._v("vuex")])]),t._v(" "),a("h2",{attrs:{id:"_2-vue3-相关"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-vue3-相关"}},[t._v("#")]),t._v(" 2. Vue3 相关")]),t._v(" "),a("h3",{attrs:{id:"_2-1-vue3-新特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-vue3-新特性"}},[t._v("#")]),t._v(" 2.1 Vue3 新特性")]),t._v(" "),a("h4",{attrs:{id:"_2-1-1-composition-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-1-composition-api"}},[t._v("#")]),t._v(" 2.1.1 Composition API")]),t._v(" "),a("p",[t._v("组合 API、为了实现基于函数式编程的机制而生")]),t._v(" "),a("ol",[a("li",[a("strong",[t._v("声明变量")]),t._v(" "),a("ul",[a("li",[t._v("通过 reactive 声明变量")])])]),t._v(" "),a("li",[a("strong",[t._v("生命周期的变更")]),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" onMounted "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setup")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("onMounted")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"component is mounted!"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),a("h4",{attrs:{id:"_2-1-2-performance-优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-2-performance-优化"}},[t._v("#")]),t._v(" 2.1.2 performance 优化")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("编译模板的静态标记")]),t._v("：重构了虚拟 DOM，保持兼容性，使 DOM 脱离模板渲染，Dom Diff 时提升性能")]),t._v(" "),a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{pre:!0,attrs:{class:"token attr-value"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("周一呢"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("明天就周二了"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("p")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("{{week}}"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token tag"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("div")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),a("ul",[a("li",[t._v("vue2 编译结果")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("with")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_c")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                attrs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_c")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"p"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_v")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"周一呢"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_c")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"p"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_v")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"明天就周二了"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_c")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_v")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_s")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("week"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("ul",[a("li",[t._v("vue3 编译结果，只有 "),a("code",[t._v("_createVNode")]),t._v(" 的四个参数不为空时，才会遍历")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createVNode "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" _createVNode"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" toDisplayString "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" _toDisplayString"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" openBlock "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" _openBlock"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" createBlock "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("as")]),t._v(" _createBlock "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vue"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("render")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("_ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" _cache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_openBlock")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_createBlock")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"app"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_createVNode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"p"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"周一呢"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_createVNode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"p"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"明天就周二了"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_createVNode")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"div"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("_toDisplayString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("_ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("week"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* TEXT */")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("事件侦听器缓存")]),t._v("\n默认条件下事件是动态追踪的，Vue3 中将事件缓存在缓存中")])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("静态提升")]),t._v("\n静态节点放在了 render 函数的外部，避免每次 render 都会生成一次静态节点")])])]),t._v(" "),a("h4",{attrs:{id:"_2-1-3-tree-shaking"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-3-tree-shaking"}},[t._v("#")]),t._v(" 2.1.3 Tree-shaking")]),t._v(" "),a("p",[t._v("打包时自动去除了没有用到的 Vue 模块")]),t._v(" "),a("h4",{attrs:{id:"_2-1-4-更好的-ts-支持"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-4-更好的-ts-支持"}},[t._v("#")]),t._v(" 2.1.4 更好的 ts 支持")]),t._v(" "),a("ul",[a("li",[t._v("类型定义提示")]),t._v(" "),a("li",[t._v("tsx 语法")]),t._v(" "),a("li",[t._v("class 组件")])]),t._v(" "),a("h4",{attrs:{id:"_2-1-5-全家桶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-5-全家桶"}},[t._v("#")]),t._v(" 2.1.5 全家桶")]),t._v(" "),a("p",[t._v("vite 的绑定")]),t._v(" "),a("h3",{attrs:{id:"_2-2-vue2-与-vue3-响应式对比"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-vue2-与-vue3-响应式对比"}},[t._v("#")]),t._v(" 2.2 Vue2 与 Vue3 响应式对比")]),t._v(" "),a("ul",[a("li",[t._v("Vue2：Object.defineProperty")]),t._v(" "),a("li",[t._v("Vue3：Proxy、Reflect")])]),t._v(" "),a("ol",[a("li",[t._v("Object.defineProperty 只能劫持对象属性，Proxy 代理整个对象")]),t._v(" "),a("li",[t._v("Object.defineProperty 对新增对象需要手动 Observe (vm.$set())")]),t._v(" "),a("li",[t._v("Proxy 最大问题是兼容，而且 polyfill 也无法抹平")])]),t._v(" "),a("h2",{attrs:{id:"_3-vuex-原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-vuex-原理"}},[t._v("#")]),t._v(" 3. Vuex 原理")]),t._v(" "),a("img",{staticClass:"zoom-img",attrs:{src:"/interview/vuex.png"}}),t._v(" "),a("h3",{attrs:{id:"_3-1-vuex-工作流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-vuex-工作流程"}},[t._v("#")]),t._v(" 3.1 Vuex 工作流程")]),t._v(" "),a("ol",[a("li",[t._v("Vue Components 中会 触发（dispatch）一些事件或动作，也就是 Actions。")]),t._v(" "),a("li",[t._v("Acions 中一般是异步操作，操作结果提交（commit）至 Mutations 中，Vuex 中的数据更新操作集中在 Mutations 中。")]),t._v(" "),a("li",[t._v("Mutations 接受到就去改变 State 中的值。")]),t._v(" "),a("li",[t._v("当 State 中的数据改变之后，对应的 View 就会被更新。")])]),t._v(" "),a("h3",{attrs:{id:"_3-2-几个重要的概念"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-几个重要的概念"}},[t._v("#")]),t._v(" 3.2 几个重要的概念")]),t._v(" "),a("ol",[a("li",[t._v("Vue Components")]),t._v(" "),a("li",[t._v("Actions")]),t._v(" "),a("li",[t._v("dispatch")]),t._v(" "),a("li",[t._v("Mutations")]),t._v(" "),a("li",[t._v("commit")]),t._v(" "),a("li",[t._v("state")]),t._v(" "),a("li",[t._v("getters")])]),t._v(" "),a("h3",{attrs:{id:"_3-3-为什么使用-vuex-redux"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-为什么使用-vuex-redux"}},[t._v("#")]),t._v(" 3.3 为什么使用 Vuex/Redux")]),t._v(" "),a("p",[t._v("传参对于多层嵌套的组件将会非常繁琐，并且对于兄弟组件间的状态传递无能为力，父子组件直接引用或者通过事件来变更状态的模式会变得非常脆弱，且代码不好维护。")]),t._v(" "),a("p",[t._v("将组件需要共享的状态抽取出来，以一个全局单例模式管理，这种模式下的组件树构成了一个巨大的视图，不管在树的哪个位置，任何组件都能获取状态或者触发行为。")]),t._v(" "),a("h3",{attrs:{id:"_3-4-vuex-与-redux-的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-vuex-与-redux-的区别"}},[t._v("#")]),t._v(" 3.4 Vuex 与 Redux 的区别")]),t._v(" "),a("ol",[a("li",[t._v("Vuex 中使用 Mutation 代替了 Redux 中的 Reducer（通过 switch 改变 state 中的值）")]),t._v(" "),a("li",[t._v("Vuex 由于 Vue 自动重新渲染的特性，只要生成新的 state 就可以")])]),t._v(" "),a("h2",{attrs:{id:"_4-webpack-执行流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-webpack-执行流程"}},[t._v("#")]),t._v(" 4. Webpack 执行流程")]),t._v(" "),a("p",[t._v("webpack 是基于事件流的，通过一系列的插件来运行，利用 tapable 库提供各种钩子来实现对于整个构建流程各个步骤的控制")]),t._v(" "),a("ol",[a("li",[t._v("创建 Compiler 实例，用于控制构建流程，compiler 实例包含 webpack 基本环境信息")]),t._v(" "),a("li",[t._v("根据配置项转换成对应内部插件，并初始化 options 配置项")]),t._v(" "),a("li",[t._v("执行 compiler.run")]),t._v(" "),a("li",[t._v("创建 Compilation 实例，每次构建都会创建一个 Compilation 实例，包含这次构建的基本信息")]),t._v(" "),a("li",[t._v("从 entry 开始递归分析依赖，对每个依赖模块进行 buildModule，通过 Loader 将不同类型的模块转换成 Webpack 模块")]),t._v(" "),a("li",[t._v("调用 Parser.parse 将上面的结果转换成 AST 树")]),t._v(" "),a("li",[t._v("遍历 AST 树，收集依赖 Dependency，并保存在 Compilation 实例的 dependencies 中")]),t._v(" "),a("li",[t._v("生成 Chunks，不同 entry 生成不同 chunk，动态导入也会生成自己的 chunk，生成的 chunk 后还会进行优化")]),t._v(" "),a("li",[t._v("使用 Template 基于 Compilation 的数据生成结果代码")])]),t._v(" "),a("h2",{attrs:{id:"_5-webpack-做过哪些优化"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-webpack-做过哪些优化"}},[t._v("#")]),t._v(" 5. Webpack 做过哪些优化")]),t._v(" "),a("ul",[a("li",[a("p",[a("strong",[t._v("优化构建速度")])]),t._v(" "),a("ul",[a("li",[t._v("多线程构建："),a("code",[t._v("thread-loader")])]),t._v(" "),a("li",[t._v("缩小打包作用域\n"),a("ul",[a("li",[t._v("exclude/include")]),t._v(" "),a("li",[t._v("resolve.extensions(文件扩展名)、resolve.modules(第三方模块路径)")]),t._v(" "),a("li",[t._v("module.noParse：这些文件不解析，但是也会打包进去")]),t._v(" "),a("li",[t._v("IgnorePlugin")])])]),t._v(" "),a("li",[t._v("缓存\n"),a("ul",[a("li",[a("code",[t._v("babel-loader")]),t._v("：开启缓存")]),t._v(" "),a("li",[a("code",[t._v("terser-webpack-plugin")]),t._v("：开启缓存(webpack5 已内置)")])])]),t._v(" "),a("li",[t._v("DLL\n"),a("ul",[a("li",[t._v("DllPlugin 进行分包，使用 DllreferencePlgin 对 mainfest.json 引用， 对基本不变的资源限行打包成静态资源，避免反复编译浪费时间。")])])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("优化 Webpack 打包体积")])]),t._v(" "),a("ul",[a("li",[t._v("代码压缩\n"),a("ul",[a("li",[a("code",[t._v("uglifyjs-webpack-plugin")]),t._v("：压缩 js")]),t._v(" "),a("li",[a("code",[t._v("mini-css-extract-plugin")]),t._v("：提取 chunk 中的 css 到单独文件")]),t._v(" "),a("li",[a("code",[t._v("optimize-css-assets-webpack-plugin")]),t._v("：开启 cssnano 压缩 css")])])]),t._v(" "),a("li",[t._v("提取页面公共资源\n"),a("ul",[a("li",[a("code",[t._v("html-webpack-externals-plugin")]),t._v("：基础包通过 CDN 引入，不打入 bundle")]),t._v(" "),a("li",[a("code",[t._v("split-chunks-plugin")]),t._v("：公共资源分离公用(webpack4 以上内置)")])])]),t._v(" "),a("li",[t._v("tree-shaking\n"),a("ul",[a("li",[a("code",[t._v("purgecss-webpack-plugin")]),t._v("：去除无用 css，建议配合 "),a("code",[t._v("mini-css-extract-plugin")]),t._v(" 配合使用")]),t._v(" "),a("li",[t._v("webpack 已内置 tree-shaking，基于 ES6 的")])])]),t._v(" "),a("li",[t._v("Scope Hoisting\n"),a("ul",[a("li",[a("code",[t._v("webpack.optimize.ModuleConcatenationPlugin()")]),t._v("：闭包合并优化")])])]),t._v(" "),a("li",[t._v("图片压缩\n"),a("ul",[a("li",[a("code",[t._v("image-webpack-loader")]),t._v("：图片压缩")])])]),t._v(" "),a("li",[t._v("动态 Polyfill\n"),a("ul",[a("li",[t._v("polyfill-service 只返回给用户需要的 polyfill")]),t._v(" "),a("li",[a("code",[t._v("@babel/preset-env")]),t._v("：通过 "),a("code",[t._v("useBuiltlns:'usage'")]),t._v("参数动态加载 polyfill")])])])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("打包结果分析")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("speed-measure-webpack-plugin")]),t._v("：分析打包过程中 Loader 和 Plugin 的耗时，找出构建过程的性能瓶颈")])])])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("\n")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);